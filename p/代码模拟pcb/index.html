<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="读书时的碎碎念"><title>代码模拟PCB</title>
<link rel=canonical href=https://selfsolo.com/p/%E4%BB%A3%E7%A0%81%E6%A8%A1%E6%8B%9Fpcb/>
<link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="代码模拟PCB">
<meta property="og:description" content="读书时的碎碎念">
<meta property="og:url" content="https://selfsolo.com/p/%E4%BB%A3%E7%A0%81%E6%A8%A1%E6%8B%9Fpcb/">
<meta property="og:site_name" content="Sera Wang">
<meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="开发"><meta property="article:published_time" content="2018-04-04T21:14:23+08:00"><meta property="article:modified_time" content="2018-04-04T21:14:23+08:00">
<meta name=twitter:title content="代码模拟PCB">
<meta name=twitter:description content="读书时的碎碎念">
<link rel="shortcut icon" href=https://ser4wang.oss-cn-beijing.aliyuncs.com/IMG_3605.JPG>
</head>
<body class="article-page has-toc">
<script>(function(){const a='StackColorScheme';localStorage.setItem(a,"dark")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script>
<div class="container main-container flex
extended">
<div id=article-toolbar>
<a href=https://selfsolo.com class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg>
<span>Back</span>
</a>
</div>
<main class="main full-width">
<article class=main-article>
<header class=article-header>
<div class=article-details>
<header class=article-category>
<a href=/categories/%E5%BC%80%E5%8F%91/ style=background-color:#2a9d8f;color:#fff>
开发
</a>
</header>
<h2 class=article-title>
<a href=/p/%E4%BB%A3%E7%A0%81%E6%A8%A1%E6%8B%9Fpcb/>代码模拟PCB</a>
</h2>
<h3 class=article-subtitle>
读书时的碎碎念
</h3>
<footer class=article-time>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Apr 04, 2018</time>
</div>
<div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>
1 min read
</time>
</div>
</footer>
</div>
</header>
<section class=article-content>
<p>界面打算参考XAMPP的设计风格，具体核心如何实现先来看一下PCB如何运作的以及目标是要写个什么东西。</p>
<hr>
<p>PCB， 即进程控制块(Processing Control Block) ，是操作系统核心中一种数据结构，主要表示进程状态。</p>
<p>这里是实验要求的内容:</p>
<h3 id=要求>要求</h3>
<pre><code>1. 确定PCB内容及其组织方式；
2. 要求模拟进程”新建”、”就绪”、”运行”、”阻塞”和”退出”5个状态；
3. 设计并实现5个进程管理函数: 进程创建(Create()),进程终止(Terminate()),进程调度(Schedule()),进程阻塞(Block()),进程唤醒(Wakeup());
4. 编写主函数，调用5个函数，实现进程管理。
</code></pre><h3 id=关键点>关键点</h3>
<pre><code>1.如何组织进程
确定PCB内容：标识信息、状态和运行时间与存储地址等信息、现场信息、管理信息；
PCB组织方式：链表，分 运行（running），就绪（ready），阻塞（block），空闲（spare）4个列表
</code></pre><p>我的理解：</p>
<p>PCB保存内容:
标识信息(Process ID);</p>
<p>状态 (进程的运行状态);</p>
<p>运行时间就是此进程从开始进程到此时运行的时间;</p>
<p>存储地址我觉得可以随便指定一个(因为模拟，所以就模拟个地址);</p>
<p>现场信息的话，我对此问了下老师，老师让自己想要不要加个程序进去，我想了下，既然是模拟，那可以这样，我模拟五个程序，每个程序要跑的时间是不同的，可以这样实现，每条进程，如果我不中止它，那它的就永远不终止，比如开始时它的指令计数器为1，time.sleep(1)后，这个数字加一…管理信息，我就不是特别清楚，我都画个gui出来了总该清楚的吧</p>
<pre><code>2.如何创建进程
申请PCB -&gt; 申请资源 -&gt; 填写PCB -&gt; 挂就绪(ready)队列
</code></pre><p>直接说就是，要创建了，点create，把它信息顺便就设置好(给它pid,记一下开始时间time.time),申请资源不是很懂，因为python我还没有看过数据结构是怎么实现的</p>
<pre><code>3.如何实现处理机调度
a. 按某种策略（如FCFS） 从就绪(ready)队列选择一个进程；
b. 摘取PCB，挂运行（running）队列；
c. 修改状态等PCB内容；设置时钟（运行时间）；恢复现场；
d. 模拟运行： 比如输入”Esc” 进入 “阻塞(Block)”状态，输入”Enter”则运行结束回到就绪（ready）队列；
e. 修改(剩余)运行(running)时间。
</code></pre><p>根据内容来看，调度(Schedule)这个函数，就是实现把进程从ready队列放到running队列，然后因为running队列内容变了，所以要相应改变PCB的内容，比如运行时间(相当于恢复现场)，
对于实现(d)来说，我不是很明白，模拟运行的意思是什么，我的理解是调用schedule(“esc”)，就会让此进程从running进入block，调用schedule(“enter”),就会让它进入ready队列。</p>
<h3 id=综上>综上</h3>
<p>于是我们对于我们要写的东西就有一个总结，所有进程都是一个类，初始化时配置它的标识符(PID),</p>
<h4 id=状态>状态</h4>
<p>运行态: running, 进程正在执行。因为是单处理器，同一时刻在运行的进程只有一个。</p>
<p>就绪态: ready, 进程做好了准备，只要有机会就开始执行,这里要判断优先级，比如3个进程同时ready，的话，先根据优先级判断执行顺序，然后再按FCFS策略来执行进程</p>
<p>阻塞态: block, 进程在某些时间发生前不能执行，如I/O操作完成</p>
<p>空闲态: spare, 它表示进程还未被加入可执行进程组，它通常是PCB已经创建但还未加载到内存中的新进程</p>
<p>退出态: terminate, 要么它自身停止(这个程序中我们一般认为它会一直运行下去，程序计数器一直加一，每次加一后跟time.sleep(1)操作，直到加到一个相当长的数字，比如100，100后自动terminate程序)，或者用户主动中断运行此进程</p>
<h4 id=函数>函数</h4>
<p>create()：相当于类的<strong>init</strong>()函数，</p>
<p>terminate(): 相当于多线程中的self.runnning = false</p>
<p>schedule(): 这个函数实现各种中间调度过程，比如用户执行了某些命令，则对进程进行相应操作，</p>
<p>block(): 使进程进入阻塞队列(block)</p>
<p>wakeup(): 使进程从阻塞队列(block)中被唤醒，重新ready</p>
</section>
<footer class=article-footer>
<section class=article-tags>
<a href=/tags/%E5%BC%80%E5%8F%91/>开发</a>
</section>
</footer>
</article>
<aside class=related-contents--wrapper>
<h2 class=section-title>Related contents</h2>
<div class=related-contents>
<div class="flex article-list--tile">
<article>
<a href=/p/python-jieba%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/>
<div class=article-details>
<h2 class=article-title>Python-jieba库的使用</h2>
</div>
</a>
</article>
<article>
<a href=/p/python-requests%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/>
<div class=article-details>
<h2 class=article-title>Python-requests库的使用</h2>
</div>
</a>
</article>
<article>
<a href=/p/python-threading%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/>
<div class=article-details>
<h2 class=article-title>Python-threading库的使用</h2>
</div>
</a>
</article>
<article>
<a href=/p/python-pil%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/>
<div class=article-details>
<h2 class=article-title>Python-PIL库的使用</h2>
</div>
</a>
</article>
<article>
<a href=/p/python-pil%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/>
<div class=article-details>
<h2 class=article-title>Python-PIL库的使用</h2>
</div>
</a>
</article>
</div>
</div>
</aside>
<footer class=site-footer>
<section class=copyright>
&copy;
2017 -
2021 Sera Wang
</section>
<section class=powerby>
Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> <br>
Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.5.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a>
</section>
</footer>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous>
</main>
<aside class="sidebar right-sidebar sticky">
<section class="widget archives">
<div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg>
</div>
<h2 class="widget-title section-title">Table of contents</h2>
<div class=widget--toc>
<nav id=TableOfContents>
<ol>
<li>
<ol>
<li><a href=#要求>要求</a></li>
<li><a href=#关键点>关键点</a></li>
<li><a href=#综上>综上</a>
<ol>
<li><a href=#状态>状态</a></li>
<li><a href=#函数>函数</a></li>
</ol>
</li>
</ol>
</li>
</ol>
</nav>
</div>
</section>
</aside>
</div>
<script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script>
</body>
</html>