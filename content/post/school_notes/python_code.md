---
title: "用Python识别验证码"
description: 读书时的碎碎念
date: 2017-11-30T21:14:23+08:00
tags:
    - Python
    - 识别码
Categories:
    - school_notes
---



## 前言

先科普一下几个概念：

1. 什么是验证码? 为什么要破解它?

   验证码现在很常见，很多网站的用户登录界面都要求输入正确的验证码，它可以通过脚本生成。

   我们写爬虫或者做某些不可描述的事情的时候往往需要登录，有时候验证码很难绕过，但我们又需要让爬虫或者工具能够顺利登录目标网站，所以就需要破解验证码。

2. python有个库叫PIL。

   全称”Python Imaging Library”，如你所见，就是python的一个图片处理库。功能非常强大，使用非常方便，所以使用它。

3. 灰度值

   因为验证码通常是一个图片，所以就必须说明一下这个灰度值的概念。

   > baike: 把白色与黑色之间按对数关系分成若干级,称为“灰度等级”。范围一般从0到255,白色为255,黑色为0,故黑白图片也称灰度图像,在医学、图像识别领域有很广泛的用途。

## 操作

对于目标验证码，采取以下操作：

```
1. 下载验证码图片
2. 对验证码图片进行降噪并切割
3. 根据相似度识别验证码
```

关门了，先挖好坑，我顺便再研究一波代码；

------

…好的我回来了

一晚上的结果，基本对比图库弄出来了

![img](http://p6jpvwsnk.bkt.clouddn.com/18-5-21/52304884.jpg)

…所以问题你们也发现了吧…400张4位验证码导出来的结果，“0”，“1”，“I”和“L”没有一个命中或者说能被肉眼看出来的…

有了基本图库，接下来就是通过PIL库的帮助来写 对比像素的”相似度”脚本了。

思路暂时是这样：

同时遍历两个目标的图片，像素相同则相似度+1，最后相似度除以像素总数，则得到最后的相似度结果。

马上要断电了。

------

12/1

…
降噪脚本完成 找不到优化的地方

…
切割脚本简易版完成 找到可以优化的地方了

…
识别脚本正在写。

正确率惨不忍睹
D8DH -> U8UH
3JZU -> JJJU
XG5X -> XCJX
95KU -> JJKU

卧槽不测了，心态炸裂了谢谢。

------

改了下代码，好多了。

结果如下图：

![img](http://p6jpvwsnk.bkt.clouddn.com/18-5-21/5608777.jpg)

![img](http://p6jpvwsnk.bkt.clouddn.com/18-5-21/79772032.jpg)

虽然准确率到了86%, 但与之而来了一个问题…现在验证码越来越高端，这方法对中文根本不适用，然后还有那么多倾斜的验证码，比如：

![img](http://p6jpvwsnk.bkt.clouddn.com/18-5-21/71234879.jpg)

中文识别就不考虑了，对于倾斜的验证码，想了很多办法最后都是放弃，剩下的一个想法就是让验证码的像素变”细”，这样就好切割验证码了，具体到切割，再到识别，还得把验证码做一次 变细+旋转

------

折腾一天，现在只想睡觉。

Sera_Crack v0.9 源代码 ↓

链接: https://pan.baidu.com/s/1dF6gtpB 密码: ft46

先到这里…下次有时间再好好写一写关于验证码识别的。